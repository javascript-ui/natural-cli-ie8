const t=!0,e=!1,n=null,r=void 0,i=-1,s="value",o="length",c="function",u="*",f=".",a="undefined"!=typeof window?window:r,h="undefined"!=typeof global?global:a,l=function(){},p=Object.freeze({}),d=Object.freeze([]),g="";function m(t){return typeof t===c}function v(t){return Array.isArray(t)}function y(t){return t!==n&&"object"==typeof t}function b(t){return"string"==typeof t}function w(t){return"number"==typeof t&&!isNaN(t)}function x(t){return"boolean"==typeof t}function $(t){return w(t)||b(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var E=Object.freeze({func:m,array:v,object:y,string:b,number:w,boolean:x,numeric:$});function A(t,e,n){if(m(t))return v(n)?t.apply(e,n):e!==r?t.call(e,n):n!==r?t(n):t()}class O{constructor(t,e){this.type=t,this.phase=O.PHASE_CURRENT,e&&(this.originalEvent=e)}preventDefault(){const e=this;if(!e.isPrevented){const{originalEvent:n}=e;n&&n.preventDefault(),e.isPrevented=t}return e}stopPropagation(){const e=this;if(!e.isStoped){const{originalEvent:n}=e;n&&n.stopPropagation(),e.isStoped=t}return e}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}function k(t,n,r){const{length:i}=t;if(i)if(r)for(let r=i-1;r>=0&&n(t[r],r)!==e;r--);else for(let r=0;r<i&&n(t[r],r)!==e;r++);}function C(t,e){t[t.length]=e}function P(t,e){t.unshift(e)}function j(t,e,n){v(e)?k(e,function(e){n(t,e)}):n(t,e)}function R(t,e){j(t,e,C)}function z(t,e){j(t,e,P)}function S(t,n,r){let s=i;return k(t,function(t,i){if(r===e?t==n:t===n)return s=i,e}),s}function T(n,r,i){let s=0;return k(n,function(t,o){(i===e?t==r:t===r)&&(n.splice(o,1),s++)},t),s}function D(t,e,n){return S(t,e,n)>=0}function N(t){return!v(t)||!t.length}O.PHASE_CURRENT=0,O.PHASE_UPWARD=1,O.PHASE_DOWNWARD=i;var W=Object.freeze({each:k,push:R,unshift:z,indexOf:S,last:function(t){const{length:e}=t;if(e>0)return t[e-1]},pop:function(t){const{length:e}=t;if(e>0)return t.pop()},remove:T,has:D,toArray:function(t){return v(t)?t:A(d.slice,t)},toObject:function(t,e,n){let r={};return k(t,function(t){r[e?t[e]:t]=n||t}),r},join:function(t,e){return t.join(e)},falsy:N});const _=/-([a-z])/gi,U=/\B([A-Z])/g,H=/^[a-z]/,I={},Y={},L={};function M(t,e,n){return w(n)?e===n?g:t.slice(e,n):t.slice(e)}function q(t,e,n){return t.indexOf(e,n!==r?n:0)}function F(t,e,n){return t.lastIndexOf(e,n!==r?n:t.length)}function K(t,e){return 0===q(t,e)}function B(t,e){return t.charCodeAt(e||0)}function G(t){return t.toUpperCase()}function V(t){return t.toLowerCase()}function X(t,e){return q(t,e)>=0}function Z(t){return!b(t)||!t.length}var J=Object.freeze({camelize:function(t){return I[t]||(I[t]=t.replace(_,function(t,e){return G(e)})),I[t]},hyphenate:function(t){return Y[t]||(Y[t]=t.replace(U,function(t,e){return"-"+V(e)})),Y[t]},capitalize:function(t){return L[t]||(L[t]=t.replace(H,G)),L[t]},trim:function(t){return Z(t)?g:t.trim()},slice:M,indexOf:q,lastIndexOf:F,startsWith:K,endsWith:function(t,e){const n=t.length-e.length;return n>=0&&F(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:B,upper:G,lower:V,has:X,falsy:Z});const Q=/\./g,tt=/\*/g,et=/\*\*/g,nt={},rt={};function it(t,e){return t===e?e.length:K(t,e+=f)?e.length:i}function st(t,n){const r=nt.hasOwnProperty(t)?nt[t]:nt[t]=t.split(f);for(let t=0,i=r.length-1;t<=i&&n(r[t],t===i)!==e;t++);}function ot(t,e){let n=rt[e];if(!n){const t=e.replace(Q,"\\.").replace(tt,"(\\w+)").replace(et,"([.\\w]+?)");n=rt[e]=new RegExp(`^${t}$`)}const r=t.match(n);if(r)return r[1]}const ct={value:r};function ut(t){return Object.keys(t)}function ft(t,e){return t.length-e.length}function at(t,e){return e.length-t.length}function ht(t,e){return ut(t).sort(e?at:ft)}function lt(t,n){for(let r in t)if(n(t[r],r)===e)break}function pt(t){lt(t,function(e,n){delete t[n]})}function dt(t,e){return lt(e,function(e,n){t[n]=e}),t}function gt(t,e){let n=t;return v(t)?e?(n=[],k(t,function(t,r){n[r]=gt(t,e)})):n=t.slice():y(t)&&(n={},lt(t,function(t,r){n[r]=e?gt(t,e):t})),n}function mt(t,i){return st(i,function(i,s){if(t==n)return t=r,e;{let e=t[i],n=e!==r;e&&m(e.get)&&(e=e.get()),s?n?(ct.value=e,t=ct):t=r:t=e}}),t}function vt(t,n,r,i){st(n,function(n,s){if(s)t[n]=r;else if(t[n])t=t[n];else{if(!i)return e;t=t[n]={}}})}function yt(t,e){return t[e]!==r}var bt=Object.freeze({keys:ut,sort:ht,each:lt,clear:pt,extend:dt,merge:function(t,e){return t&&e?dt(dt({},t),e):t||e},copy:gt,get:mt,set:vt,has:yt,falsy:function(t){return!y(t)||v(t)||!ut(t).length}});function wt(t,e){return t!=n&&t.toString?t.toString():e!==r?e:g}const xt=1,$t=2,Et=3,At=4,Ot=5,kt="undefined"!=typeof console?console:n,Ct=/yox/.test(wt(l))?$t:Et,Pt=a&&/edge|msie|trident/i.test(a.navigator.userAgent)?g:"%c",jt=kt?Pt?function(t,e,n){kt.log(Pt+t,n,e)}:function(t,e){kt.log(t,e)}:l;function Rt(){if(h){const t=h.YOX_LOG_LEVEL;if(t>=xt&&t<=Ot)return t}return Ct}function zt(t){return`background-color:${t};border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;`}var St=Object.freeze({DEBUG:xt,INFO:$t,WARN:Et,ERROR:At,FATAL:Ot,debug:function(t,e){Rt()<=xt&&jt(e||"Yox debug",t,zt("#999"))},info:function(t,e){Rt()<=$t&&jt(e||"Yox info",t,zt("#2db7f5"))},warn:function(t,e){Rt()<=Et&&jt(e||"Yox warn",t,zt("#f90"))},error:function(t,e){Rt()<=At&&jt(e||"Yox error",t,zt("#ed4014"))},fatal:function(t,e){if(Rt()<=Ot)throw new Error(`[${e||"Yox fatal"}]: ${t}`)}});class Tt{constructor(t){this.ns=t||e,this.listeners={}}fire(n,i,s){let o=this,c=b(n)?o.parse(n):n,u=o.listeners[c.type],f=t;if(u){u=gt(u);const t=i&&i[0]instanceof O?i[0]:r;k(u,function(n){if(!Wt(c.ns,n)||!D(u,n)||s&&!s(c,i,n))return;t&&(t.listener=n.fn);let a=A(n.fn,n.ctx,i);return t&&(t.listener=r),n.num=n.num?n.num+1:1,n.num===n.max&&o.off(c,n.fn),t&&(a===e?t.prevent().stop():t.isStoped&&(a=e)),a===e?f=e:void 0})}return f}on(t,e){const n=this,r=n.listeners,i=m(e)?{fn:e}:e;if(y(i)&&m(i.fn)){const e=b(t)?n.parse(t):t;i.ns=e.ns,R(r[e.type]||(r[e.type]=[]),i)}}off(e,n){const r=this,i=r.listeners;if(e){const s=b(e)?r.parse(e):e,o=s.type,c=s.ns,u=Nt(n),f=function(e,n){k(e,function(t,n){u(t)&&Wt(c,t)&&e.splice(n,1)},t),e.length||delete i[n]};o?i[o]&&f(i[o],o):c&&lt(i,f)}else r.listeners={}}has(n,r){let i=this.listeners,s=b(n)?this.parse(n):n,o=s.type,c=s.ns,u=t,f=Nt(r),a=function(t){return k(t,function(t){if(f(t)&&Wt(c,t))return u=e}),u};return o?i[o]&&a(i[o]):c&&lt(i,a),!u}parse(t){const e={type:t,ns:g};if(this.ns){const n=q(t,f);n>=0&&(e.type=M(t,0,n),e.ns=M(t,n+1))}return e}}function Dt(){return t}function Nt(t){return m(t)?function(e){return t===e.fn}:Dt}function Wt(e,n){const{ns:r}=n;return r&&e?r===e:t}function _t(t){return m(t)&&X(wt(t),"[native code]")}let Ut;typeof setImmediate===c&&_t(setImmediate)&&(Ut=setImmediate);var Ht=Ut=typeof MessageChannel===c&&_t(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout;let It;class Yt{static shared(){return It||(It=new Yt)}constructor(){this.tasks=[]}append(t,e){const n=this,{tasks:r}=n;R(r,{fn:t,ctx:e}),1===r.length&&Ht(function(){n.run()})}prepend(t,e){const n=this,{tasks:r}=n;z(r,{fn:t,ctx:e}),1===r.length&&Ht(function(){n.run()})}clear(){this.tasks.length=0}run(){const{tasks:t}=this;t.length&&(this.tasks=[],k(t,function(t){A(t.fn,t.ctx)}))}}function Lt(t,e){return $(t)?+t:e!==r?e:0}class Mt{constructor(e,n,r,i,s,o,c){const u=this;u.keypath=e,u.cache=r,u.deps=i,u.context=s.context,u.observer=s,u.getter=o,u.setter=c,u.unique={},u.watcher=function(n,r,i){const o=u.value,c=u.get(t);c!==o&&s.diff(e,c,o)},u.watcherOptions={sync:n,watcher:u.watcher},(u.fixed=!N(i))&&k(i,function(t){s.watch(t,u.watcherOptions)})}get(t){const e=this,{getter:n,context:r}=e;if(e.cache){if(t||!yt(e,s))if(e.fixed)e.value=A(n,r);else{e.unbind();const t=Mt.current;Mt.current=e,e.value=A(n,r),e.bind(),Mt.current=t}}else e.value=A(n,r);return e.value}set(t){const{setter:e,context:n}=this;e&&e.call(n,t)}add(e){this.unique[e]=t}bind(){const{unique:t,deps:e,observer:n,watcherOptions:r}=this;lt(t,function(t,i){R(e,i),n.watch(i,r)}),this.unique={}}unbind(){const{deps:e,observer:n,watcher:r}=this;k(e,function(t){n.unwatch(t,r)},t),e.length=0}}function qt(t,n){let r;return k(t,function(t){const i=it(n,t);if(i>=0)return r={name:t,prop:M(n,i)},e}),r}function Ft(t,e){if(t==n||e===g)return t;const r=mt(t,e);return r?r.value:void 0}function Kt(e,n,i,s,c){const u=function(t,n,i){if(n!==i){const a=(u=t,(o=e)&&u?o+f+u:o||u);k(s,function(t){ot(a,t)!==r&&c(t,a,n,i)}),Kt(a,n,i,s,c)}var o,u};(function(e,n,i){const s=b(e),c=b(n);if(s||c)return i(o,s?e.length:r,c?n.length:r),t})(n,i,u)||function(e,n,i){const s=v(e),c=v(n);if(s||c){const u=s?e.length:r,f=c?n.length:r;i(o,u,f);for(let t=0,s=Math.max(u||0,f||0);t<s;t++)i(""+t,e?e[t]:r,n?n[t]:r);return t}}(n,i,u)||function(t,e,n){const r=y(t),i=y(e);(r||i)&&(t=r?t:p,e=i?e:p,r&&lt(t,function(t,r){t!==e[r]&&n(r,t,e[r])}),i&&lt(e,function(e,r){e!==t[r]&&n(r,t[r],e)}))}(n,i,u)}function Bt(t,e,n,i,s,o){let c;lt(i,function(i,f){if(function(t){return X(t,u)}(f))return void(ot(t,f)!==r?o(f,t,e,n):s&&(c?R(c,f):c=[f]));const a=it(f,t);if(a>=0){const t=M(f,a),r=Ft(e,t),i=Ft(n,t);r!==i&&o(f,f,r,i)}}),c&&Kt(t,e,n,c,o)}function Gt(t,e,n){if(n.count&&e)return n.count--,e[0]!==e[1]}const Vt={watcher:l};function Xt(e,n){return m(e)?(Vt.watcher=e,Vt.immediate=n===t,Vt):e&&e.watcher?e:void 0}class Zt{constructor(t,e){this.data=t||{},this.context=e||this,this.nextTask=new Yt,this.syncEmitter=new Tt,this.asyncEmitter=new Tt,this.asyncChanges={}}get(t,e,n){const r=Mt.current,{data:i,computed:s,reversedComputedKeys:o}=this;if(t===g)return i;let c,u;if(r&&!n&&r.add(t),s){if(u=s[t])return u.get();if(o){const e=qt(o,t);e&&e.prop&&(c=mt(s[e.name].get(),e.prop))}}return c||(c=mt(i,t)),c?c.value:e}set(t,e){const n=this,{data:r,computed:i,reversedComputedKeys:s}=n,o=function(t,e){const o=n.get(e);if(t===o)return;let c;if(i&&((c=i[e])&&c.set(t),s)){const n=qt(s,e);if(n&&n.prop&&(c=i[n.name])){const e=c.get();y(e)&&vt(e,n.prop,t)}}c||vt(r,e,t),n.diff(e,t,o)};b(t)?o(e,t):y(t)&&lt(t,o)}diff(e,n,i){const s=this,{syncEmitter:o,asyncEmitter:c,asyncChanges:u}=s,f=36!==B(e);Bt(e,n,i,o.listeners,f,function(t,e,n,r){o.fire(t,[n,r,e])}),Bt(e,n,i,c.listeners,f,function(e,n,i,o){k(c.listeners[e],function(t){t.count++});const{keypaths:f}=u[n]||(u[n]={value:o,keypaths:[]});D(f,e)||R(f,e),s.pending||(s.pending=t,s.nextTask.append(function(){s.pending&&(s.pending=r,s.diffAsync())}))})}diffAsync(){const t=this,{asyncEmitter:e,asyncChanges:n}=t;t.asyncChanges={},lt(n,function(n,r){const i=[t.get(r),n.value,r];k(n.keypaths,function(t){e.fire(t,i,Gt)})})}addComputed(e,n){let r,i,s=t,o=t,c=[];if(m(n))r=n;else if(y(n)){const t=n;x(t.cache)&&(s=t.cache),x(t.sync)&&(o=t.sync),v(t.deps)&&(c=gt(t.deps)),m(t.get)&&(r=t.get),m(t.set)&&(i=t.set)}if(r){const n=this,u=new Mt(e,o,s,c,n,r,i);return n.computed||(n.computed={}),n.computed[e]=u,n.reversedComputedKeys=ht(n.computed,t),u}}removeComputed(e){const n=this,{computed:r}=n;r&&yt(r,e)&&(delete r[e],n.reversedComputedKeys=ht(r,t))}watch(t,e,n){const i=this,{context:s,syncEmitter:o,asyncEmitter:c}=i,u=function(t,e){const n=e.sync?o:c,u={fn:e.watcher,ctx:s,count:0};e.once&&(u.max=1),n.on(t,u),e.immediate&&A(e.watcher,s,[i.get(t),r,t])};b(t)?u(t,Xt(e,n)):lt(t,function(t,e){u(e,Xt(t))})}unwatch(t,e){this.syncEmitter.off(t,e),this.asyncEmitter.off(t,e)}toggle(t){const e=!this.get(t);return this.set(t,e),e}increase(t,e,n){const r=Lt(this.get(t),0)+(e||1);if(!w(n)||r<=n)return this.set(t,r),r}decrease(t,e,n){const r=Lt(this.get(t),0)-(e||1);if(!w(n)||r>=n)return this.set(t,r),r}insert(n,r,i){let s=this.get(n);s=v(s)?gt(s):[];const{length:o}=s;if(i===t||i===o)s.push(r);else if(i===e||0===i)s.unshift(r);else{if(!(i>0&&i<o))return;s.splice(i,0,r)}return this.set(n,s),t}append(e,n){return this.insert(e,n,t)}prepend(t,n){return this.insert(t,n,e)}removeAt(e,n){let r=this.get(e);if(v(r)&&n>=0&&n<r.length)return(r=gt(r)).splice(n,1),this.set(e,r),t}remove(e,n){let r=this.get(e);if(v(r)&&T(r=gt(r),n))return this.set(e,r),t}copy(t,e){return gt(t,e)}destroy(){this.syncEmitter.off(),this.asyncEmitter.off(),this.nextTask.clear(),pt(this)}}class Jt{constructor(e){const n=this,r=e||p;n.$emitter=new Tt(t),r.events&&n.on(r.events);let{data:i,props:s,vnode:o,propTypes:c,computed:u,methods:f,watchers:a,extensions:h}=r;n.$options=r,h&&dt(n,h);const l=s?gt(s):{},d=n.$observer=new Zt(l,n);u&&lt(u,function(t,e){d.addComputed(e,t)});const g=m(i)?A(i,n,e):i;y(g)&&lt(g,function(t,e){l[e]=t}),f&&lt(f,function(t,e){n[e]=t}),a&&n.watch(a)}static define(t){return t}static use(t){t.install(Jt)}static nextTick(t,e){Yt.shared().append(t,e)}static compile(t,e){return t}static directive(t,e){}static transition(t,e){}static component(t,e){}static partial(t,e){}static filter(t,e){}get(t,e){return this.$observer.get(t,e)}set(t,e){const{$observer:n}=this;n&&n.set(t,e)}on(t,e){return te(this,t,e),this}once(e,n){return te(this,e,n,t),this}off(t,e){return this.$emitter.off(t,e),this}fire(e,n,i){let s,o=this,{$emitter:c,$parent:u,$children:f}=o,a=e instanceof O?e:new O(e),h=[a];if(a.ns===r){const t=c.parse(a.type);a.type=t.type,a.ns=t.ns}return a.target||(a.target=o),y(n)?R(h,n):n===t&&(i=t),(s=c.fire(a,h))&&(i?f&&(a.phase=O.PHASE_DOWNWARD,k(f,function(e){return s=e.fire(a,n,t)})):u&&(a.phase=O.PHASE_UPWARD,s=u.fire(a,n))),s}watch(t,e,n){return this.$observer.watch(t,e,n),this}unwatch(t,e){return this.$observer.unwatch(t,e),this}loadComponent(t,e){}createComponent(t,e){return this}directive(t,e){}transition(t,e){}component(t,e){}partial(t,e){}filter(t,e){}forceUpdate(t){}render(){}update(t,e){}checkProp(t,e){}destroy(){const{$parent:t,$options:e,$emitter:n,$observer:r}=this;r.destroy(),n.off(),pt(this)}nextTick(t){this.$observer.nextTask.append(t,this)}toggle(t){return this.$observer.toggle(t)}increase(t,e,n){return this.$observer.increase(t,e,n)}decrease(t,e,n){return this.$observer.decrease(t,e,n)}insert(t,e,n){return this.$observer.insert(t,e,n)}append(t,e){return this.$observer.append(t,e)}prepend(t,e){return this.$observer.prepend(t,e)}removeAt(t,e){return this.$observer.removeAt(t,e)}remove(t,e){return this.$observer.remove(t,e)}copy(t,e){return this.$observer.copy(t,e)}}function Qt(t,e,n,r){const i={fn:n,ctx:t};r&&(i.max=1),t.$emitter.on(e,i)}function te(t,e,n,r){b(e)?Qt(t,e,n,r):lt(e,function(e,n){Qt(t,n,e,r)})}Jt.version="1.0.0-alpha.108",Jt.is=E,Jt.array=W,Jt.object=bt,Jt.string=J,Jt.logger=St,Jt.Event=O,Jt.Emitter=Tt;export default Jt;
//# sourceMappingURL=yox.esm.min.js.map
