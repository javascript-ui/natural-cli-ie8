<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!--[if lt IE 9]>
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!--[if lt IE 9]>
    <script src="https://cdn.bootcss.com/es5-shim/4.5.10/es5-shim.min.js"></script>
    <script src="https://cdn.bootcss.com/es5-shim/4.5.10/es5-sham.min.js"></script>
    <![endif]-->

    <!--<script>-->
        <!--if (!document.addEventListener) {-->
            <!--// IE6~IE8-->
            <!--document.write('<script src="https://cdn.bootcss.com/ieBetter.js/1.0.1.rc/ieBetter-min.js"><\/script>');-->
        <!--}-->
    <!--</script>-->
    
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="./navigo.js"></script>
</head>
<body>

<h1>兼容IE8路由</h1>

<div id="view"></div>

<script>

    // getElementById wrapper
    function $id(id) {
        return document.getElementById(id);
    }

    // asyncrhonously fetch the html template partial from the file directory,
    // then set its contents to the html of the parent element
    function loadHTML(url, id) {
        var req = new XMLHttpRequest();
        req.open('GET', url);
        req.send();
        req.onload = function () {
            $id(id).innerHTML = req.responseText;
        };
    }

    // use #! to hash
    var router = new Navigo(null, true, '#!');
    router.on({
        // 'view' is the id of the div element inside which we render the HTML
        'first': function () {
            loadHTML('./templates/first.html', 'view');
        },
        'second': function () {
            loadHTML('./templates/second.html', 'view');
        },
        'third': function () {
            loadHTML('./templates/third.html', 'view');
        }
    });

    // set the default route
    router.on(function () {
        $id('view').innerHTML = '<h2>Here by default</h2>';
    });

    // set the 404 route
    router.notFound(function (query) {
        $id('view').innerHTML = '<h3>Couldn\'t find the page you\'re looking for...</h3>';
    });

    router.resolve();

</script>

</body>
</html>
